{"ast":null,"code":"'use strict';\n\nvar OAuth = require('oauth-1.0a');\n\nvar CryptoJS = require('crypto-js');\n\nvar fetch = require('node-fetch');\n\nmodule.exports = WooCommerceAPI;\n\nfunction WooCommerceAPI(opt) {\n  if (!(this instanceof WooCommerceAPI)) {\n    return new WooCommerceAPI(opt);\n  }\n\n  opt = opt || {};\n\n  if (!opt.url) {\n    throw new Error('url is required');\n  }\n\n  if (!opt.consumerKey) {\n    throw new Error('consumerKey is required');\n  }\n\n  if (!opt.consumerSecret) {\n    throw new Error('consumerSecret is required');\n  }\n\n  this.classVersion = '1.0.0';\n\n  this._setDefaultsOptions(opt);\n}\n\nWooCommerceAPI.prototype._setDefaultsOptions = function (opt) {\n  this.url = opt.url;\n  this.wpAPI = opt.wpAPI || false;\n  this.wpAPIPrefix = opt.wpAPIPrefix || 'wp-json';\n  this.version = opt.version || 'v3';\n  this.isSsl = /^https/i.test(this.url);\n  this.consumerKey = opt.consumerKey;\n  this.consumerSecret = opt.consumerSecret;\n  this.verifySsl = false === opt.verifySsl ? false : true;\n  this.encoding = opt.encoding || 'utf8';\n  this.queryStringAuth = opt.queryStringAuth || false;\n  this.port = opt.port || '';\n  this.timeout = opt.timeout;\n};\n\nWooCommerceAPI.prototype._normalizeQueryString = function (url) {\n  if (-1 === url.indexOf('?')) {\n    return url;\n  }\n\n  var query = url;\n  var params = [];\n  var queryString = '';\n\n  for (var p in query) {\n    params.push(p);\n  }\n\n  params.sort();\n\n  for (var i in params) {\n    if (queryString.length) {\n      queryString += '&';\n    }\n\n    queryString += encodeURIComponent(params[i]).replace('%5B', '[').replace('%5D', ']');\n    queryString += '=';\n    queryString += encodeURIComponent(query[params[i]]);\n  }\n\n  return url.split('?')[0] + '?' + queryString;\n};\n\nWooCommerceAPI.prototype._getUrl = function (endpoint) {\n  var url = '/' === this.url.slice(-1) ? this.url : this.url + '/';\n  var api = this.wpAPI ? this.wpAPIPrefix + '/' : 'wp-json/';\n  url = url + api + this.version + '/' + endpoint;\n\n  if ('' !== this.port) {\n    var hostname = url;\n    url = url.replace(hostname, hostname + ':' + this.port);\n  }\n\n  if (!this.isSsl) {\n    return this._normalizeQueryString(url);\n  }\n\n  return url;\n};\n\nWooCommerceAPI.prototype._getOAuth = function () {\n  var data = {\n    consumer: {\n      key: this.consumerKey,\n      secret: this.consumerSecret\n    },\n    signature_method: 'HMAC-SHA256',\n    hash_function: function hash_function(base_string, key) {\n      return CryptoJS.HmacSHA256(base_string, key).toString(CryptoJS.enc.Base64);\n    }\n  };\n\n  if (-1 < ['v1', 'v2'].indexOf(this.version)) {\n    data.last_ampersand = false;\n  }\n\n  return new OAuth(data);\n};\n\nWooCommerceAPI.prototype.join = function (obj, separator) {\n  var arr = [];\n\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      arr.push(key + '=' + obj[key]);\n    }\n  }\n\n  return arr.join(separator);\n};\n\nWooCommerceAPI.prototype._request = function (method, endpoint, data) {\n  var url = this._getUrl(endpoint);\n\n  var params = {\n    encoding: this.encoding,\n    timeout: this.timeout,\n    headers: {\n      'User-Agent': 'WooCommerce API React Native/' + this.classVersion,\n      'Content-Type': 'application/json'\n    }\n  };\n\n  if (this.isSsl) {\n    if (this.queryStringAuth) {\n      params.qs = {\n        consumer_key: this.consumerKey,\n        consumer_secret: this.consumerSecret\n      };\n    } else {\n      params.auth = {\n        user: this.consumerKey,\n        pass: this.consumerSecret\n      };\n    }\n\n    if (!this.verifySsl) {\n      params.strictSSL = false;\n    }\n  } else {\n    params.qs = this._getOAuth().authorize({\n      url: url + '?' + this.join(data, '&'),\n      method: method\n    });\n  }\n\n  var requestUrl = url + '?' + this.join(params.qs, '&');\n\n  if (method === 'GET') {\n    if (data) {\n      requestUrl += '&' + this.join(data, '&');\n    }\n\n    return fetch(requestUrl, {\n      headers: {\n        'Cache-Control': 'no-cache'\n      }\n    }).then(function (response) {\n      return response.json();\n    });\n  } else {\n    return fetch(requestUrl, {\n      method: method,\n      headers: {\n        'Cache-Control': 'no-cache',\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(function (response) {\n      return response.json();\n    });\n  }\n};\n\nWooCommerceAPI.prototype.get = function (endpoint, data) {\n  return this._request('GET', endpoint, data);\n};\n\nWooCommerceAPI.prototype.post = function (endpoint, data) {\n  return this._request('POST', endpoint, data);\n};\n\nWooCommerceAPI.prototype.put = function (endpoint, data) {\n  return this._request('PUT', endpoint, data);\n};\n\nWooCommerceAPI.prototype.delete = function (endpoint) {\n  return this._request('DELETE', endpoint, null);\n};\n\nWooCommerceAPI.prototype.options = function (endpoint) {\n  return this._request('OPTIONS', endpoint, null);\n};","map":{"version":3,"sources":["/Users/teranov/Desktop/proyectos/repuestos/node_modules/react-native-woocommerce-api/lib/react-native-woocommerce-api.js"],"names":["OAuth","require","CryptoJS","fetch","module","exports","WooCommerceAPI","opt","url","Error","consumerKey","consumerSecret","classVersion","_setDefaultsOptions","prototype","wpAPI","wpAPIPrefix","version","isSsl","test","verifySsl","encoding","queryStringAuth","port","timeout","_normalizeQueryString","indexOf","query","params","queryString","p","push","sort","i","length","encodeURIComponent","replace","split","_getUrl","endpoint","slice","api","hostname","_getOAuth","data","consumer","key","secret","signature_method","hash_function","base_string","HmacSHA256","toString","enc","Base64","last_ampersand","join","obj","separator","arr","hasOwnProperty","_request","method","headers","qs","consumer_key","consumer_secret","auth","user","pass","strictSSL","authorize","requestUrl","then","response","json","Accept","body","JSON","stringify","get","post","put","delete","options"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nvar OAuth = require('oauth-1.0a');\r\nvar CryptoJS = require('crypto-js');\r\nvar fetch = require('node-fetch');\r\n\r\nmodule.exports = WooCommerceAPI;\r\n\r\n/**\r\n * WooCommerce REST API wrapper\r\n *\r\n * @param {Object} opt\r\n */\r\nfunction WooCommerceAPI(opt) {\r\n  if (!(this instanceof WooCommerceAPI)) {\r\n    return new WooCommerceAPI(opt);\r\n  }\r\n\r\n  opt = opt || {};\r\n\r\n  if (!opt.url) {\r\n    throw new Error('url is required');\r\n  }\r\n\r\n  if (!opt.consumerKey) {\r\n    throw new Error('consumerKey is required');\r\n  }\r\n\r\n  if (!opt.consumerSecret) {\r\n    throw new Error('consumerSecret is required');\r\n  }\r\n\r\n  this.classVersion = '1.0.0';\r\n  this._setDefaultsOptions(opt);\r\n}\r\n\r\n/**\r\n * Set default options\r\n *\r\n * @param {Object} opt\r\n */\r\nWooCommerceAPI.prototype._setDefaultsOptions = function (opt) {\r\n  this.url = opt.url;\r\n  this.wpAPI = opt.wpAPI || false;\r\n  this.wpAPIPrefix = opt.wpAPIPrefix || 'wp-json';\r\n  this.version = opt.version || 'v3';\r\n  this.isSsl = /^https/i.test(this.url);\r\n  this.consumerKey = opt.consumerKey;\r\n  this.consumerSecret = opt.consumerSecret;\r\n  this.verifySsl = false === opt.verifySsl ? false : true;\r\n  this.encoding = opt.encoding || 'utf8';\r\n  this.queryStringAuth = opt.queryStringAuth || false;\r\n  this.port = opt.port || '';\r\n  this.timeout = opt.timeout;\r\n};\r\n\r\n/**\r\n * Normalize query string for oAuth\r\n *\r\n * @param  {string} url\r\n * @return {string}\r\n */\r\nWooCommerceAPI.prototype._normalizeQueryString = function (url) {\r\n  // Exit if don't find query string\r\n  if (-1 === url.indexOf('?')) {\r\n    return url;\r\n  }\r\n\r\n  //var query       = _url.parse(url, true).query;\r\n  var query = url;\r\n  var params = [];\r\n  var queryString = '';\r\n\r\n  for (var p in query) {\r\n    params.push(p);\r\n  }\r\n  params.sort();\r\n\r\n  for (var i in params) {\r\n    if (queryString.length) {\r\n      queryString += '&';\r\n    }\r\n\r\n    queryString += encodeURIComponent(params[i])\r\n      .replace('%5B', '[')\r\n      .replace('%5D', ']');\r\n    queryString += '=';\r\n    queryString += encodeURIComponent(query[params[i]]);\r\n  }\r\n\r\n  return url.split('?')[0] + '?' + queryString;\r\n};\r\n\r\n/**\r\n * Get URL\r\n *\r\n * @param  {String} endpoint\r\n *\r\n * @return {String}\r\n */\r\nWooCommerceAPI.prototype._getUrl = function (endpoint) {\r\n  var url = '/' === this.url.slice(-1) ? this.url : this.url + '/';\r\n  var api = this.wpAPI ? this.wpAPIPrefix + '/' : 'wp-json/';\r\n\r\n  url = url + api + this.version + '/' + endpoint;\r\n\r\n  // Include port.\r\n  if ('' !== this.port) {\r\n    var hostname = url; //_url.parse(url, true).hostname;\r\n    url = url.replace(hostname, hostname + ':' + this.port);\r\n  }\r\n\r\n  if (!this.isSsl) {\r\n    return this._normalizeQueryString(url);\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\n/**\r\n * Get OAuth\r\n *\r\n * @return {Object}\r\n */\r\nWooCommerceAPI.prototype._getOAuth = function () {\r\n  var data = {\r\n    consumer: {\r\n      key: this.consumerKey,\r\n      secret: this.consumerSecret,\r\n    },\r\n    signature_method: 'HMAC-SHA256',\r\n    hash_function: function (base_string, key) {\r\n      return CryptoJS.HmacSHA256(base_string, key).toString(\r\n        CryptoJS.enc.Base64\r\n      );\r\n    },\r\n  };\r\n\r\n  if (-1 < ['v1', 'v2'].indexOf(this.version)) {\r\n    data.last_ampersand = false;\r\n  }\r\n  return new OAuth(data);\r\n};\r\n\r\n/**\r\n * Join key object value to string by separator\r\n */\r\nWooCommerceAPI.prototype.join = function (obj, separator) {\r\n  var arr = [];\r\n  for (var key in obj) {\r\n    if (obj.hasOwnProperty(key)) {\r\n      arr.push(key + '=' + obj[key]);\r\n    }\r\n  }\r\n  return arr.join(separator);\r\n};\r\n\r\n/**\r\n * Do requests\r\n *\r\n * @param  {String}   method\r\n * @param  {String}   endpoint\r\n * @param  {Object}   data\r\n * @param  {Function} callback\r\n *\r\n * @return {Object}\r\n */\r\nWooCommerceAPI.prototype._request = function (method, endpoint, data) {\r\n  var url = this._getUrl(endpoint);\r\n\r\n  var params = {\r\n    encoding: this.encoding,\r\n    timeout: this.timeout,\r\n    headers: {\r\n      'User-Agent': 'WooCommerce API React Native/' + this.classVersion,\r\n      'Content-Type': 'application/json',\r\n    },\r\n  };\r\n\r\n  if (this.isSsl) {\r\n    if (this.queryStringAuth) {\r\n      params.qs = {\r\n        consumer_key: this.consumerKey,\r\n        consumer_secret: this.consumerSecret,\r\n      };\r\n    } else {\r\n      params.auth = {\r\n        user: this.consumerKey,\r\n        pass: this.consumerSecret,\r\n      };\r\n    }\r\n\r\n    if (!this.verifySsl) {\r\n      params.strictSSL = false;\r\n    }\r\n  } else {\r\n    params.qs = this._getOAuth().authorize({\r\n      url: url + '?' + this.join(data, '&'),\r\n      method: method,\r\n    });\r\n  }\r\n\r\n  // encode the oauth_signature to make sure it not remove + charactor\r\n  //params.qs.oauth_signature = encodeURIComponent(params.qs.oauth_signature);\r\n  var requestUrl = url + '?' + this.join(params.qs, '&');\r\n  // console.log(data)\r\n  if (method === 'GET') {\r\n    if (data) {\r\n      requestUrl += '&' + this.join(data, '&');\r\n    }\r\n\r\n    // console.log('encode', params.qs.oauth_signature);\r\n    //console.log(requestUrl);\r\n\r\n    return fetch(requestUrl, {\r\n      headers: {\r\n        'Cache-Control': 'no-cache',\r\n      },\r\n    }).then((response) => response.json());\r\n  } else {\r\n    return fetch(requestUrl, {\r\n      method: method,\r\n      headers: {\r\n        'Cache-Control': 'no-cache',\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    }).then((response) => response.json());\r\n  }\r\n};\r\n\r\n/**\r\n * GET requests\r\n *\r\n * @param  {String}   endpoint\r\n * @param  {Function} callback\r\n *\r\n * @return {Object}\r\n */\r\nWooCommerceAPI.prototype.get = function (endpoint, data) {\r\n  return this._request('GET', endpoint, data);\r\n};\r\n\r\n/**\r\n * POST requests\r\n *\r\n * @param  {String}   endpoint\r\n * @param  {Object}   data\r\n * @param  {Function} callback\r\n *\r\n * @return {Object}\r\n */\r\nWooCommerceAPI.prototype.post = function (endpoint, data) {\r\n  return this._request('POST', endpoint, data);\r\n};\r\n\r\n/**\r\n * PUT requests\r\n *\r\n * @param  {String}   endpoint\r\n * @param  {Object}   data\r\n * @param  {Function} callback\r\n *\r\n * @return {Object}\r\n */\r\nWooCommerceAPI.prototype.put = function (endpoint, data) {\r\n  return this._request('PUT', endpoint, data);\r\n};\r\n\r\n/**\r\n * DELETE requests\r\n *\r\n * @param  {String}   endpoint\r\n * @param  {Function} callback\r\n *\r\n * @return {Object}\r\n */\r\nWooCommerceAPI.prototype.delete = function (endpoint) {\r\n  return this._request('DELETE', endpoint, null);\r\n};\r\n\r\n/**\r\n * OPTIONS requests\r\n *\r\n * @param  {String}   endpoint\r\n * @param  {Function} callback\r\n *\r\n * @return {Object}\r\n */\r\nWooCommerceAPI.prototype.options = function (endpoint) {\r\n  return this._request('OPTIONS', endpoint, null);\r\n};"]},"metadata":{},"sourceType":"script"}